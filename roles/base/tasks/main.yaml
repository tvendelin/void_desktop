---
- name: 'xbps upgrade'
  xbps: name=xbps upgrade=yes
  become: true

- name: 'xbps extra repos'
  xbps:
    upgrade: yes
    name:
      - void-repo-nonfree
      - xtools
  become: true

- name: 'xbps upgrade'
  xbps:
    upgrade: yes
  become: true

- name: 'install packages'
  xbps:
    state: latest
    name: '{{item}}'
  loop:
    - psmisc
    - fzf
    - fd
    - feh
    - cups
    - curl
    - git
    - rxvt-unicode
    - urxvt-perls
    - unzip
    - xorg
    - alsa-utils
    - base-devel
    - libX11-devel
    - libXft-devel
    - libXinerama-devel
    - xkblayout-state
  become: true

- name: 'install davinci dependencies'
  xbps:
    state: latest
    upgrade: yes
    name:
      - nvidia
      - nvidia-opencl
      - libopencv
      - xcb-util
      - xcb-util-wm
      - xcb-util-image
      - xcb-util-keysyms
      - xcb-util-renderutil
      - libxkbcommon-x11
      - glu
  become: true

- name: 'Make dirs'
  file:
    path: "{{lookup('env', 'HOME')}}/{{item}}"
    state: 'directory'
  loop:
    - 'suckless'
    - '.fonts'

- import_tasks: suckless.yaml
- import_tasks: dotfiles.yaml
- import_tasks: fonts.yaml
